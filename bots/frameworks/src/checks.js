var request = require("request");
var request = request.defaults({jar: true})
const global = require('../../../src/functionsglobal')
const log = global.log
process.env["NODE_TLS_REJECT_UNAUTHORIZED"] = 0;
const cheerio = require('cheerio')

class checks {
    //verifica o protocolo
    async protocolo(url) {
        return new Promise(async function (resolve, reject) {
            try {
                await request({
                    uri: url,
                    method: "GET",
                    timeout: 10000,
                    rejectUnauthorized: false,
                    maxRedirects: 10,
                    requestCert: true,
                    agent: false,
                    headers: {
                        'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:74.0) Gecko/20100101 Firefox/74.0'
                    }
                }, async function (error, response) {
                    if (error) {
                        resolve("http://")
                    } else if (response.statusCode == 200) {
                        resolve("https://")
                    } else {
                        resolve("http://")
                    }
                }).on('error', err => {
                    resolve('Erro');
                });
            } catch (error) {
                resolve("http://")
            }

        });
    }

    async identifica(url) {
        return new Promise(async function (resolve, reject) {
            try {
                request({
                    uri: url,
                    method: "GET",
                    timeout: 10000,
                    rejectUnauthorized: false,
                    followRedirect: true,
                    maxRedirects: 10,
                    requestCert: true,
                    agent: false,
                    headers: {
                        'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:74.0) Gecko/20100101 Firefox/74.0'
                    }
                }, async function (error, response, body) {
                    if (error) return resolve(999);
                    //if (response.statusCode == 404) return resolve(999);
                    //if (response.statusCode == 403) return resolve(999);
                    //if (response.statusCode == 502) return resolve(999);
                    //if (response.statusCode == 500) return resolve(999);

                    const $ = cheerio.load(body);
                    try {
                        var meta = $('meta')

                        for (let key in meta) {
                            let value = meta[key];
                            if (value.type == 'tag' && value.name == 'meta') {
                                var Text_Meta = JSON.parse(JSON.stringify(value.attribs))
                                if (Text_Meta.content != undefined) {
                                    Text_Meta = Text_Meta.content
                                    
                                    Text_Meta = Text_Meta.toLowerCase()
                                    if (Text_Meta.indexOf("wp-content/") > -1 || Text_Meta.indexOf("wordpress ") > -1) {
                                        resolve(2);
                                    } else if (Text_Meta.indexOf("joomla") > -1) {
                                        resolve(1);
                                    } else if (Text_Meta.indexOf("drupal") > -1) {
                                        resolve(4);
                                    } else if (Text_Meta.indexOf("webnode") > -1) { //Webnode
                                        resolve(117); //Webnode
                                    } else if (Text_Meta.indexOf("shopsys") > -1) { //Shopsys
                                        resolve(118); //Shopsys
                                    } else if (Text_Meta.indexOf("safarimedia") > -1) { //Shoptet
                                        resolve(119); //Shoptet
                                    } else if (Text_Meta.indexOf("vbulletin") > -1) { //vBulletin
                                        resolve(9); //vBulletin
                                    } else if (Text_Meta.indexOf("a-blog cms") > -1) { //A-Blog Cms
                                        resolve(120); //A-Blog Cms
                                    } else if (Text_Meta.indexOf("ave.cms") > -1) { //AVE cms
                                        resolve(121); //AVE cms
                                    } else if (Text_Meta.indexOf("adobe golive") > -1) { //Adobe GoLive
                                        resolve(122); //Adobe GoLive
                                    } else if (Text_Meta.indexOf("advantshop.net") > -1) { //Advantshop
                                        resolve(123); //Advantshop
                                    } else if (Text_Meta.indexOf("agility cms") > -1) { //Agility CMS
                                        resolve(124); //Agility CMS
                                    } else if (Text_Meta.indexOf("alterian") > -1) { //Alterian
                                        resolve(125); //Alterian
                                    } else if (Text_Meta.indexOf("amiro.cms") > -1) { //Amiro.CMS
                                        resolve(126); //Amiro.CMS
                                    } else if (Text_Meta.indexOf("lenya") > -1) { //Apache Lenya
                                        resolve(127); //Apache Lenya
                                    } else if (Text_Meta.indexOf("backdrop cms") > -1) { //Backdrop CMS
                                        resolve(128); //Backdrop CMS
                                    } else if (Text_Meta.indexOf("basekit") > -1) { //BaseKit
                                        resolve(129); //BaseKit
                                    } else if (Text_Meta.indexOf("big cartel") > -1) { //Big Cartel
                                        resolve(130); //Big Cartel
                                    } else if (Text_Meta.indexOf("bigace") > -1) { //Bigace
                                        resolve(131); //Bigace
                                    } else if (Text_Meta.indexOf("blogger") > -1) { //Blogger
                                        resolve(132); //Blogger
                                    } else if (Text_Meta.indexOf("bolt") > -1) { //Bolt
                                        resolve(133); //Bolt
                                    } else if (Text_Meta.indexOf("bootply") > -1) { //Bootply
                                        resolve(134); //Bootply
                                    } else if (Text_Meta.indexOf("bricolage") > -1) { //Bricolage CMS
                                        resolve(135); //Bricolage CMS
                                    } else if (Text_Meta.indexOf("c1 cms") > -1) { //C1 CMS
                                        resolve(136); //C1 CMS
                                    } else if (Text_Meta.indexOf("cm4all") > -1) { //CM4all
                                        resolve(137); //CM4all
                                    } else if (Text_Meta.indexOf("cms tool") > -1) { //CMS-Tool
                                        resolve(138); //CMS-Tool
                                    } else if (Text_Meta.indexOf("cms made simple") > -1) { //CMS Made Simple
                                        resolve(139); //CMS Made Simple
                                    } else if (Text_Meta.indexOf("cmsimple_xh") > -1) { //CMSimple_XH
                                        resolve(140); //CMSimple_XH
                                    } else if (Text_Meta.indexOf("canalblog") > -1) { //CanalBlog
                                        resolve(141); //CanalBlog
                                    } else if (Text_Meta.indexOf("chevereto") > -1) { //Chevereto
                                        resolve(142); //Chevereto
                                    } else if (Text_Meta.indexOf("coffeecup") > -1) { //CoffeeCup
                                        resolve(143); //CoffeeCup
                                    } else if (Text_Meta.indexOf("commonspot") > -1) { //CommonSpot
                                        resolve(144); //CommonSpot
                                    } else if (Text_Meta.indexOf("contao") > -1) { //Contao
                                        resolve(145); //Contao
                                    } else if (Text_Meta.indexOf("cms contenido") > -1) { //Contenido CMS
                                        resolve(146); //Contenido CMS
                                    } else if (Text_Meta.indexOf("contensis cms") > -1) { //Contensis CMS
                                        resolve(147); //Contensis CMS
                                    } else if (Text_Meta.indexOf("contentxxl") > -1) { //ContentXXL
                                        resolve(148); //ContentXXL
                                    } else if (Text_Meta.indexOf("convio cms") > -1) { //Convio
                                        resolve(149); //Convio
                                    } else if (Text_Meta.indexOf("coremedia") > -1) { //CoreMedia CMS
                                        resolve(150); //CoreMedia CMS
                                    } else if (Text_Meta.indexOf("corepublish") > -1) { //Corepublish
                                        resolve(151); //Corepublish
                                    } else if (Text_Meta.indexOf("crowd") > -1) { //Crowd Fusion
                                        resolve(152); //Crowd Fusion
                                    } else if (Text_Meta.indexOf("cubecart") > -1) { //CubeCart
                                        resolve(153); //CubeCart
                                    } else if (Text_Meta.indexOf("diafan") > -1) { //DIAFAN.CMS
                                        resolve(154); //DIAFAN.CMS
                                    } else if (Text_Meta.indexOf("dotnetnuke") > -1) { //DNN
                                        resolve(155); //DNN
                                    } else if (Text_Meta.indexOf("cms danneo") > -1) { //Danneo
                                        resolve(156); //Danneo
                                    } else if (Text_Meta.indexOf("dataLife engine") > -1) { //DataLife Engine
                                        resolve(157); //DataLife Engine
                                    } else if (Text_Meta.indexOf("dim works") > -1) { //Dim Works
                                        resolve(158); //Dim Works
                                    } else if (Text_Meta.indexOf("discourse") > -1) { //Discourse
                                        resolve(159); //Discourse
                                    } else if (Text_Meta.indexOf("discuz") > -1) { //Hycus
                                        resolve(160); //Hycus
                                    } else if (Text_Meta.indexOf("dokuwiki") > -1) { //DokuWiki
                                        resolve(161); //DokuWiki
                                    } else if (Text_Meta.indexOf("doteasy") > -1) { //DotEasy
                                        resolve(162); //DotEasy
                                    } else if (Text_Meta.indexOf("duda") > -1) { //Duda
                                        resolve(163); //Duda
                                    } else if (Text_Meta.indexOf("dynamicweb") > -1) { //Dynamicweb
                                        resolve(164); //Dynamicweb
                                    } else if (Text_Meta.indexOf("e-plus") > -1) { //E+ CMS
                                        resolve(165); //E+ CMS
                                    } else if (Text_Meta.indexOf("e-monsite") > -1) { //E-monsite
                                        resolve(166); //E-monsite
                                    } else if (Text_Meta.indexOf("ecshop") > -1) { //ECShop
                                        resolve(167); //ECShop
                                    } else if (Text_Meta.indexOf("ideagen") > -1) { //Easysite
                                        resolve(168); //Easysite
                                    } else if (Text_Meta.indexOf("editplus") > -1) { //EditPlus
                                        resolve(169); //EditPlus
                                        // } else if (Text_Meta.indexOf("edito") > -1) { //Edito
                                        //     resolve(170); //Edito
                                    } else if (Text_Meta.indexOf("enonic") > -1) { //Enonic CMS
                                        resolve(171); //Enonic CMS
                                    } else if (Text_Meta.indexOf("episerver") > -1) { //Episerver
                                        resolve(172); //Episerver
                                    } else if (Text_Meta.indexOf("everweb") > -1) { //Everweb
                                        resolve(173); //Everweb
                                    } else if (Text_Meta.indexOf("fork cms") > -1) { //Fork CMS
                                        resolve(174); //Fork CMS
                                    } else if (Text_Meta.indexOf("zeta producer") > -1) { //Zeta Producer
                                        resolve(175); //Zeta Producer
                                    } else if (Text_Meta.indexOf("microsoft frontpage") > -1) { //FrontPage
                                        resolve(176); //FrontPage
                                    } else if (Text_Meta.indexOf("gx webmanager") > -1) { //GX Web Manager
                                        resolve(177); //GX Web Manager
                                    } else if (Text_Meta.indexOf("getsimple") > -1) { //GetSimple CMS
                                        resolve(178); //GetSimple CMS
                                    } else if (Text_Meta.indexOf("ghost") > -1) { //Ghost
                                        resolve(18); //Ghost
                                    } else if (Text_Meta.indexOf("go daddy website builder") > -1) { //GoDaddy Website Builder
                                        resolve(179); //GoDaddy Website Builder
                                    } else if (Text_Meta.indexOf("government site builder") > -1) { //Government Site Builder
                                        resolve(180); //Government Site Builder
                                    } else if (Text_Meta.indexOf("graffiti cms") > -1) { //GraffitiCMS
                                        resolve(181); //GraffitiCMS
                                    } else if (Text_Meta.indexOf("gravcms") > -1) { //Grav CMS
                                        resolve(182); //Grav CMS
                                    } else if (Text_Meta.indexOf("homestead sitebuilder") > -1) { //Homestead
                                        resolve(183); //Homestead
                                    } else if (Text_Meta.indexOf("hostedshop") > -1) { //HostedShop
                                        resolve(184); //HostedShop
                                    } else if (Text_Meta.indexOf("hubspot") > -1) { //HubSpot
                                        resolve(185); //HubSpot
                                    } else if (Text_Meta.indexOf("hugo") > -1) { //Hugo
                                        resolve(186); //Hugo
                                    } else if (Text_Meta.indexOf("imagecms") > -1) { //ImageCMS
                                        resolve(187); //ImageCMS
                                    } else if (Text_Meta.indexOf("immediacy") > -1) { //Immediacy
                                        resolve(188); //Immediacy
                                    } else if (Text_Meta.indexOf("imperia") > -1) { //Imperia CMS
                                        resolve(189); //Imperia CMS
                                    } else if (Text_Meta.indexOf("impresscms") > -1) { //ImpressCMS
                                        resolve(190); //ImpressCMS
                                    } else if (Text_Meta.indexOf("impresspages") > -1) { //ImpressPages CMS
                                        resolve(191); //ImpressPages CMS
                                    } else if (Text_Meta.indexOf("rails connector for infopark cms fion") > -1) { //Infopark CMS Fiona
                                        resolve(192); //Infopark CMS Fiona
                                    } else if (Text_Meta.indexOf("instantcms") > -1) { //InstantCMS
                                        resolve(193); //InstantCMS
                                    } else if (Text_Meta.indexOf("interred") > -1) { //InterRed
                                        resolve(194); //InterRed
                                    } else if (Text_Meta.indexOf("//www.jadu.net") > -1) { //Jadu CMS
                                        resolve(195); //Jadu CMS
                                    } else if (Text_Meta.indexOf("jekyll") > -1) { //Jekyll
                                        resolve(196); //Jekyll
                                    } else if (Text_Meta.indexOf("jieqi.com") > -1) { //Jieqi CMS
                                        resolve(197); //Jieqi CMS
                                    } else if (Text_Meta.indexOf("justsystems homepage builder") > -1) { //JustSystems Homepage Builder
                                        resolve(198); //JustSystems Homepage Builder
                                    } else if (Text_Meta.indexOf("kernel video sharing") > -1) { //KVS CMS
                                        resolve(199); //KVS CMS
                                    } else if (Text_Meta.indexOf("koken") > -1) { //Koken
                                        resolve(200); //Koken
                                    } else if (Text_Meta.indexOf("komodo cms") > -1) { //Komodo CMS
                                        resolve(201); //Komodo CMS
                                    } else if (Text_Meta.indexOf("kryptronic software") > -1) { //Kryptronic
                                        resolve(202); //Kryptronic
                                    } else if (Text_Meta.indexOf("labrador") > -1) { //Labrador CMS
                                        resolve(203); //Labrador CMS
                                    } else if (Text_Meta.indexOf("lauyan toweb") > -1) { //Lauyan TOWeb
                                        resolve(204); //Lauyan TOWeb
                                    } else if (Text_Meta.indexOf("//www.getliveedit.com") > -1) { //LiveEdit
                                        resolve(205); //LiveEdit
                                    } else if (Text_Meta.indexOf("logicommerce") > -1) { //LogiCommerce
                                        resolve(206); //LogiCommerce
                                    } else if (Text_Meta.indexOf("loja integrada") > -1) { //Loja Integrada
                                        resolve(207); //Loja Integrada
                                    } else if (Text_Meta.indexOf("mabisy") > -1) { //Mabisy
                                        resolve(208); //Mabisy
                                    } else if (Text_Meta.indexOf("mambo") > -1) { //Mambo
                                        resolve(209); //Mambo
                                    } else if (Text_Meta.indexOf("mediawiki") > -1) { //MediaWiki
                                        resolve(210); //MediaWiki
                                    } else if (Text_Meta.indexOf("melody") > -1) { //Melody
                                        resolve(211); //Melody
                                    } else if (Text_Meta.indexOf("metro publisher") > -1) { //Metro Publisher
                                        resolve(212); //Metro Publisher
                                    } else if (Text_Meta.indexOf("microsoft word") > -1) { //Microsoft Word
                                        resolve(213); //Microsoft Word
                                    } else if (Text_Meta.indexOf("midgard") > -1) { //Midgard CMS
                                        resolve(214); //Midgard CMS
                                    } else if (Text_Meta.indexOf("mijnwebwinkel") > -1) { //Mijnwebwinkel
                                        resolve(215); //Mijnwebwinkel
                                    } else if (Text_Meta.indexOf("mintox") > -1) { //Mintox
                                        resolve(34); //Mintox
                                    } else if (Text_Meta.indexOf("mobirise") > -1) { //Mobirise
                                        resolve(216); //Mobirise
                                    } else if (Text_Meta.indexOf("modified shopsoftware") > -1) { //Modified Shopsoftware
                                        resolve(217); //Modified Shopsoftware
                                    } else if (Text_Meta.indexOf("modx cms") > -1) { //Modx CMS
                                        resolve(218); //Modx CMS
                                    } else if (Text_Meta.indexOf("movable type") > -1) { //Movable Type
                                        resolve(219); //Movable Type
                                    } else if (Text_Meta.indexOf("mura cms") > -1) { //Mura
                                        resolve(220); //Mura
                                    } else if (Text_Meta.indexOf("netobjects") > -1) { //NetObjects
                                        resolve(221); //NetObjects
                                    } else if (Text_Meta.indexOf("netvolution") > -1) { //Netvolution
                                        resolve(222); //Netvolution
                                    } else if (Text_Meta.indexOf("notepad++") > -1) { //Notepad++
                                        resolve(223); //Notepad++
                                    } else if (Text_Meta.indexOf("nucleus") > -1) { //Nucleus CMS
                                        resolve(224); //Nucleus CMS
                                    } else if (Text_Meta.indexOf("nukeviet") > -1) { //NukeViet
                                        resolve(40); //NukeViet
                                    } else if (Text_Meta.indexOf("odoo") > -1) { //Odoo
                                        resolve(42); //Odoo
                                    } else if (Text_Meta.indexOf("one.com web") > -1) { //One.com
                                        resolve(43); //One.com
                                    } else if (Text_Meta.indexOf("open cms") > -1) { //Open CMS
                                        resolve(225); //Open CMS
                                    } else if (Text_Meta.indexOf("open journal systems") > -1) { //Open Journal Systems
                                        resolve(226); //Open Journal Systems
                                    } else if (Text_Meta.indexOf("opennemas") > -1) { //OpenNemas
                                        resolve(227); //OpenNemas
                                    } else if (Text_Meta.indexOf("openoffice") > -1) { //OpenOffice
                                        resolve(228); //OpenOffice
                                    } else if (Text_Meta.indexOf("orchard") > -1) { //Orchard
                                        resolve(229); //Orchard
                                    } else if (Text_Meta.indexOf("orthodox web solutions") > -1) { //Orthodox Web Solutions
                                        resolve(230); //Orthodox Web Solutions
                                    } else if (Text_Meta.indexOf("osclass") > -1) { //Osclass
                                        resolve(44); //Osclass
                                    } else if (Text_Meta.indexOf("oxatis") > -1) { //Oxatis
                                        resolve(231); //Oxatis
                                    } else if (Text_Meta.indexOf("php-nuke") > -1) { //PHP-Nuke
                                        resolve(232); //PHP-Nuke
                                    } else if (Text_Meta.indexOf("php link directory") > -1) { //PHP Link Directory
                                        resolve(233); //PHP Link Directory
                                    } else if (Text_Meta.indexOf("phpshop.ru") > -1) { //PHPShop
                                        resolve(234); //PHPShop
                                    } else if (Text_Meta.indexOf("phpvide") > -1) { //PHPVibe
                                        resolve(235); //PHPVibe
                                    } else if (Text_Meta.indexOf("pagecloud") > -1) { //PageCloud
                                        resolve(47); //PageCloud
                                    } else if (Text_Meta.indexOf("pagekit") > -1) { //Pagekit
                                        resolve(48); //Pagekit
                                    } else if (Text_Meta.indexOf("parallels presence builder") > -1) { //Parallels Presence Builder
                                        resolve(236); //Parallels Presence Builder
                                    } else if (Text_Meta.indexOf("pelican") > -1) { //Pelican
                                        resolve(237); //Pelican
                                    } else if (Text_Meta.indexOf("percussion cm system") > -1) { //Percussion
                                        resolve(238); //Percussion
                                    } else if (Text_Meta.indexOf("piwigo") > -1) { //Piwigo
                                        resolve(239); //Piwigo
                                    } else if (Text_Meta.indexOf("prestashop") > -1) { //PrestaShop
                                        resolve(3); //PrestaShop
                                    } else if (Text_Meta.indexOf("processwire") > -1) { //ProcessWire
                                        resolve(240); //ProcessWire
                                    } else if (Text_Meta.indexOf("quick.cms") > -1) { //Quick.CMS
                                        resolve(54); //Quick.CMS
                                    } else if (Text_Meta.indexOf("quick.cart") > -1) { //Quick.Cart'
                                        resolve(241); //Quick.Cart'
                                    } else if (Text_Meta.indexOf("rcms") > -1) { //RCMS
                                        resolve(242); //RCMS
                                    } else if (Text_Meta.indexOf("rvglobalsoft") > -1) { //RVsitebuilder
                                        resolve(243); //RVsitebuilder
                                    } else if (Text_Meta.indexOf("rapidweaver") > -1) { //RapidWeaver
                                        resolve(55); //RapidWeaver
                                    } else if (Text_Meta.indexOf("ready pro ecommerce") > -1) { //Ready Pro Ecommerce
                                        resolve(244); //Ready Pro Ecommerce
                                    } else if (Text_Meta.indexOf("sumoshop") > -1) { //SUMOshop
                                        resolve(56); //SUMOshop
                                    } else if (Text_Meta.indexOf("sana commerce") > -1) { //Sana Commerce
                                        resolve(57); //Sana Commerce
                                    } else if (Text_Meta.indexOf("sandvox") > -1) { //Sandvox
                                        resolve(245); //Sandvox
                                    } else if (Text_Meta.indexOf("schoolsitepro") > -1) { //SchoolSitePro
                                        resolve(246); //SchoolSitePro
                                    } else if (Text_Meta.indexOf("seamlesscms") > -1) { //Seamless CMS
                                        resolve(247); //Seamless CMS
                                    } else if (Text_Meta.indexOf("serendipity") > -1) { //Serendipity
                                        resolve(248); //Serendipity
                                    } else if (Text_Meta.indexOf("microsoft sharepoint") > -1) { //SharePoint
                                        resolve(59); //SharePoint
                                    } else if (Text_Meta.indexOf("shopFactory") > -1) { //ShopFactory
                                        resolve(249); //ShopFactory
                                    } else if (Text_Meta.indexOf("showoff") > -1) { //Showoff
                                        resolve(63); //Showoff
                                    } else if (Text_Meta.indexOf("silverstripe") > -1) { //SilverStripe CMS
                                        resolve(250); //SilverStripe CMS
                                    } else if (Text_Meta.indexOf("sitedirect") > -1) { //SiteDirect
                                        resolve(251); //SiteDirect
                                    } else if (Text_Meta.indexOf("sitepad") > -1) { //SitePad
                                        resolve(252); //SitePad
                                    } else if (Text_Meta.indexOf("sitespinner") > -1) { //SiteSpinner
                                        resolve(253); //SiteSpinner
                                    } else if (Text_Meta.indexOf("sitefinity") > -1) { //Sitefinity
                                        resolve(66); //Sitefinity
                                    } else if (Text_Meta.indexOf("sitonline") > -1) { //Sitonline
                                        resolve(67); //Sitonline
                                    } else if (Text_Meta.indexOf("sitoo webshop") > -1) { //Sitoo
                                        resolve(254); //Sitoo
                                    } else if (Text_Meta.indexOf("smartetailing") > -1) { //SmartEtailing
                                        resolve(68); //SmartEtailing
                                    } else if (Text_Meta.indexOf("smartstore") > -1) { //SmartStore.NET
                                        resolve(69); //SmartStore.NET
                                    } else if (Text_Meta.indexOf("sparkle") > -1) { //Sparkle CMS
                                        resolve(255); //Sparkle CMS
                                    } else if (Text_Meta.indexOf("tangora") > -1) { //Tangora Web CMS
                                        resolve(76); //Tangora Web CMS
                                    } else if (Text_Meta.indexOf("communityserver") > -1) { //Telligent
                                        resolve(256); //Telligent
                                    } else if (Text_Meta.indexOf("tempest") > -1) { //Tempest
                                        resolve(77); //Tempest
                                    } else if (Text_Meta.indexOf("textalk webshop") > -1) { //Textalk Webshop
                                        resolve(78); //Textalk Webshop
                                    } else if (Text_Meta.indexOf("textpattern cms") > -1) { //Textpattern CMS
                                        resolve(257); //Textpattern CMS
                                    } else if (Text_Meta.indexOf("tiki wiki cms") > -1) { //textpattern cms
                                        resolve(258); //textpattern cms
                                    } else if (Text_Meta.indexOf("trellix") > -1) { //Trellix
                                        resolve(259); //Trellix
                                    } else if (Text_Meta.indexOf("//www.typepad.com") > -1) { //TypePad
                                        resolve(82); //TypePad
                                    } else if (Text_Meta.indexOf("typecho") > -1) { //Typecho
                                        resolve(260); //Typecho
                                    } else if (Text_Meta.indexOf("typesetter cms") > -1) { //Typesetter
                                        resolve(261); //Typesetter
                                    } else if (Text_Meta.indexOf("typo3 cms") > -1) { //Typo3
                                        resolve(83); //Typo3
                                    } else if (Text_Meta.indexOf("ultimize") > -1) { //Ultimize CMS
                                        resolve(84); //Ultimize CMS
                                    } else if (Text_Meta.indexOf("visual studio") > -1) { //Visual Studio
                                        resolve(262); //Visual Studio
                                    } else if (Text_Meta.indexOf("wysiwyg") > -1) { //WYSIWYG Web Builder
                                        resolve(263); //WYSIWYG Web Builder
                                    } else if (Text_Meta.indexOf("web to date") > -1) { //Web 2 Date
                                        resolve(264); //Web 2 Date
                                    } else if (Text_Meta.indexOf("webacappella") > -1) { //WebAcappella
                                        resolve(91); //WebAcappella
                                    } else if (Text_Meta.indexOf("webgui") > -1) { //WebGUI
                                        resolve(92); //WebGUI
                                    } else if (Text_Meta.indexOf("web page maker") > -1) { //Web Page Maker
                                        resolve(265); //Web Page Maker
                                    } else if (Text_Meta.indexOf("webplus") > -1) { //WebPlus
                                        resolve(266); //WebPlus
                                    } else if (Text_Meta.indexOf("web presence builder") > -1) { //Web Presence Builder
                                        resolve(267); //Web Presence Builder
                                    } else if (Text_Meta.indexOf("webSite tonigh") > -1) { //WebSite Tonight
                                        resolve(268); //WebSite Tonight
                                    } else if (Text_Meta.indexOf("ibm websphere studio homepage builder") > -1) { //WebSphere Studio Homepage Builder
                                        resolve(269); //WebSphere Studio Homepage Builder
                                    } else if (Text_Meta.indexOf("webflow") > -1) { //Webflow
                                        resolve(93); //Webflow
                                    } else if (Text_Meta.indexOf("weblication") > -1) { //Weblication
                                        resolve(94); //Weblication
                                    } else if (Text_Meta.indexOf("websale") > -1) { //Websale
                                        resolve(96); //Websale
                                    } else if (Text_Meta.indexOf("webSite x5") > -1) { //WebSite X5
                                        resolve(98); //WebSite X5
                                    } else if (Text_Meta.indexOf("websplanet") > -1) { //Websplanet
                                        resolve(270); //Websplanet
                                    } else if (Text_Meta.indexOf("wheelcms") > -1) { //Wheel CMS
                                        resolve(271); //Wheel CMS
                                    } else if (Text_Meta.indexOf("wix.com ") > -1) { //Wix
                                        resolve(101); //Wix
                                    } else if (Text_Meta.indexOf("xt:commerce") > -1) { //XT-Commerce
                                        resolve(272); //XT-Commerce
                                    } else if (Text_Meta.indexOf("xiuno") > -1) { //Xiuno BBS
                                        resolve(273); //Xiuno BBS
                                    } else if (Text_Meta.indexOf("xpressengine") > -1) { //XpressEngine
                                        resolve(274); //XpressEngine
                                    } else if (Text_Meta.indexOf("x-cart") > -1) { //X‑Cart
                                        resolve(275); //X‑Cart
                                    } else if (Text_Meta.indexOf("zms") > -1) { //ZMS
                                        resolve(107); //ZMS
                                    } else if (Text_Meta.indexOf("zen cart") > -1) { //Zen Cart
                                        resolve(276); //Zen Cart
                                    } else if (Text_Meta.indexOf("zoho sites") > -1) { //Zoho Sites
                                        resolve(277); //Zoho Sites
                                    } else if (Text_Meta.indexOf("zyro") > -1) { //Zyro
                                        resolve(278); //Zyro
                                    } else if (Text_Meta.indexOf("b2evolution") > -1) { //b2evolution
                                        resolve(279); //b2evolution
                                    } else if (Text_Meta.indexOf("blog.ir") > -1) { //blog.ir
                                        resolve(280); //blog.ir
                                    } else if (Text_Meta.indexOf("contrexx") > -1) { //cloudrexx
                                        resolve(281); //cloudrexx
                                    } else if (Text_Meta.indexOf("concrete5") > -1) { //concrete5
                                        resolve(109); //concrete5
                                    } else if (Text_Meta.indexOf("esyndicat") > -1) { //eSyndiCat
                                        resolve(282); //eSyndiCat
                                    } else if (Text_Meta.indexOf("ez publish") > -1) { //eZ Publish
                                        resolve(283); //eZ Publish
                                    } else if (Text_Meta.indexOf("elcomcms") > -1) { //elcomCMS
                                        resolve(284); //elcomCMS
                                    } else if (Text_Meta.indexOf("fcms") > -1) { //fCMS
                                        resolve(114); //fCMS
                                    } else if (Text_Meta.indexOf("iweb") > -1) { //iWeb
                                        resolve(115); //iWeb
                                    } else if (Text_Meta.indexOf("nopcommerce") > -1) { //nopCommerce
                                        resolve(285); //nopCommerce
                                    } else if (Text_Meta.indexOf("onpublix") > -1) { //onpublix CMS
                                        resolve(286); //onpublix CMS
                                    } else if (Text_Meta.indexOf("ptools") > -1) { //pTools
                                        resolve(287); //pTools
                                    } else if (Text_Meta.indexOf("phpwcms") > -1) { //phpwcms
                                        resolve(288); //phpwcms
                                    } else if (Text_Meta.indexOf("phpwind") > -1) { //phpwind
                                        resolve(289); //phpwind
                                    } else if (Text_Meta.indexOf("plentymarkets") > -1) { //plentymarkets
                                        resolve(290); //plentymarkets
                                    } else if (Text_Meta.indexOf("moodle") > -1) { //Moodle
                                        resolve(297); //Moodle
                                    } else if (Text_Meta.indexOf("tray._trackpageview") > -1) { //Moodle
                                        resolve(298); //Moodle
                                    } else if (Text_Meta.indexOf("ektron") > -1) { //Ektron
                                        resolve(304); //Ektron
                                    } else if (Text_Meta.indexOf("bigcommerce") > -1) { //Bigcommerce
                                        resolve(305); //Bigcommerce    
                                    } else if (Text_Meta.indexOf("bitrix") > -1) { //Bitrix
                                        resolve(306); //Bitrix     
                                    } else if (Text_Meta.indexOf("bam.nr-data.net") > -1) { //Ruby on Rails
                                        resolve(307); //Ruby on Rails            
                                    } else if (Text_Meta.indexOf("sitecore") > -1) { //sitecore
                                        resolve(309); //sitecore             
                                    } else if (Text_Meta.indexOf("django") > -1) { //Django CMS
                                        resolve(311); //Django CMS   
                                    } else {
                                        //console.log(Text_Meta)
                                    }
                                }
                            }
                        }

                    } catch (e) {
                        console.log(e)
                    }

                    try {
                        //Carrega lista
                        var scripts = $('script')

                        for (let key in scripts) {
                            let value = scripts[key]; // get the value by key
                            if (value.type == 'script' && value.name == 'script') {
                                if (value.children[0] != undefined) {
                                    var Text_Scripts = value.children[0].data
                                    Text_Scripts = Text_Scripts.toLowerCase()
                                    if (Text_Scripts.indexOf("mage.cookies.path") > -1 || Text_Scripts.indexOf("magento_ui/") > -1) { //Magento
                                        resolve(8); //Magento
                                    } else if (Text_Scripts.indexOf("wp-content/") > -1) { //WordPress
                                        resolve(2); //WordPress
                                    } else if (Text_Scripts.indexOf("var prestashop = {") > -1) { //PrestaShop
                                        resolve(3); //PrestaShop
                                    } else if (Text_Scripts.indexOf("vbulletin_init();") > -1) { //vBulletin
                                        resolve(9); //vBulletin
                                    } else if (Text_Scripts.indexOf("var liferay = {") > -1) { //Liferay
                                        resolve(10); //Liferay
                                    } else if (Text_Scripts.indexOf("ciashop.js") > -1) { //Ciashop
                                        resolve(11); //Ciashop
                                    } else if (Text_Scripts.indexOf("analytics.civicplus.com") > -1) { //CivicEngage
                                        resolve(12); //CivicEngage
                                    } else if (Text_Scripts.indexOf("window.dealerfireextensionsettings") > -1) { //DealerFire
                                        resolve(13); //DealerFire
                                    } else if (Text_Scripts.indexOf("//cdn.dcsaas.net/") > -1) { //DreamCommerce
                                        resolve(14); //DreamCommerce
                                    } else if (Text_Scripts.indexOf("flarum") > -1) { //Flarum
                                        resolve(15); //Flarum
                                    } else if (Text_Scripts.indexOf(".format.com/static/") > -1) { //Format
                                        resolve(16); //Format
                                    } else if (Text_Scripts.indexOf("geeklogeditorbaseUrl") > -1) { //Geeklog
                                        resolve(17); //Geeklog
                                    } else if (Text_Scripts.indexOf("ghost-sdk") > -1) { //Ghost
                                        resolve(18); //Ghost
                                    } else if (Text_Scripts.indexOf("sites-chrome-main") > -1) { //Google Sites
                                        resolve(19); //Google Sites
                                    } else if (Text_Scripts.indexOf("humhub.modules.") > -1) { //HumHub
                                        resolve(20); //HumHub
                                    } else if (Text_Scripts.indexOf("/intershop/static/wfs/") > -1) { //Intershop
                                        resolve(21); //Intershop
                                    } else if (Text_Scripts.indexOf("asset/jtl") > -1) { //JTL-Shop
                                        resolve(22); //JTL-Shop
                                    } else if (Text_Scripts.indexOf("var jetshopdata") > -1) { //JetShop
                                        resolve(23); //JetShop
                                    } else if (Text_Scripts.indexOf("var jimdodata") > -1) { //Jimdo
                                        resolve(24); //Jimdo
                                    } else if (Text_Scripts.indexOf("leadpagescenterobject") > -1) { //LeadPages
                                        resolve(25); //LeadPages
                                    } else if (Text_Scripts.indexOf("scripts/lcms.modal.js") > -1) { //LightCMS
                                        resolve(26); //LightCMS
                                    } else if (Text_Scripts.indexOf("//livedoor.blogimg.jp/") > -1) { //Livedoor Blog
                                        resolve(27); //Livedoor Blog
                                    } else if (Text_Scripts.indexOf("var livestreet_security_key") > -1) { //Livestreet CMS
                                        resolve(28); //Livestreet CMS
                                    } else if (Text_Scripts.indexOf("mono_donottrack=true") > -1) { //MONO
                                        resolve(29); //MONO
                                    } else if (Text_Scripts.indexOf("//gigaplus.makeshop.jp/") > -1) { //MakeShop
                                        resolve(30); //MakeShop
                                    } else if (Text_Scripts.indexOf("/application/maxsite/templates/") > -1) { //MaxSite CMS
                                        resolve(31); //MaxSite CMS
                                    } else if (Text_Scripts.indexOf("mediawiki.page.startup") > -1) { //MediaWiki
                                        resolve(32); //MediaWiki
                                    } else if (Text_Scripts.indexOf("//cdn-static-1.medium.com/") > -1) { //Medium
                                        resolve(33); //Medium
                                    } else if (Text_Scripts.indexOf("mintoxjs.") > -1) { //Mintox
                                        resolve(34); //Mintox
                                    } else if (Text_Scripts.indexOf(".nationbuilder.com/themes/") > -1) { //Nation Builder
                                        resolve(35); //Nation Builder
                                    } else if (Text_Scripts.indexOf("-neos.") > -1) { //Neos
                                        resolve(36); //Neos
                                    } else if (Text_Scripts.indexOf("nextcloud_announcements") > -1) { //Nextcloud
                                        resolve(37); //Nextcloud
                                    } else if (Text_Scripts.indexOf("//static.ning.com/") > -1) { //Ning
                                        resolve(38); //Ning
                                    } else if (Text_Scripts.indexOf("nodebb.min.js") > -1) { //Nodebb
                                        resolve(39); //Nodebb
                                    } else if (Text_Scripts.indexOf("nv3c_") > -1) { //NukeViet
                                        resolve(40); //NukeViet
                                    } else if (Text_Scripts.indexOf("/octopress.js") > -1) { //Octopress
                                        resolve(41); //Octopress
                                    } else if (Text_Scripts.indexOf("odoo.session_info") > -1) { //Odoo
                                        resolve(42); //Odoo
                                    } else if (Text_Scripts.indexOf("/onewebstatic/") > -1) { //One.com
                                        resolve(43); //One.com
                                    } else if (Text_Scripts.indexOf("/oc-content/") > -1) { //Osclass
                                        resolve(44); //Osclass
                                    } else if (Text_Scripts.indexOf("//assets.over-blog-kiwi.com/") > -1) { //Overblog
                                        resolve(45); //Overblog
                                    } else if (Text_Scripts.indexOf("/fusion/") > -1) { //PHP-Fusion
                                        resolve(46); //PHP-Fusion
                                    } else if (Text_Scripts.indexOf("//assets.pagecloud.com/") > -1) { //PageCloud
                                        resolve(47); //PageCloud
                                    } else if (Text_Scripts.indexOf("/pagekit/") > -1) { //Pagekit
                                        resolve(48); //Pagekit
                                    } else if (Text_Scripts.indexOf("-pangea/prod/utag.js") > -1) { //Pangea CMS
                                        resolve(49); //Pangea CMS
                                    } else if (Text_Scripts.indexOf("pimcore/static/js") > -1) { //Pimcore
                                        resolve(50); //Pimcore
                                    } else if (Text_Scripts.indexOf("resourceplone.") > -1) { //Plone
                                        resolve(51); //Plone
                                    } else if (Text_Scripts.indexOf("//shared.ph1.powerboutique.net/") > -1) { //PowerBoutique
                                        resolve(52); //PowerBoutique
                                    } else if (Text_Scripts.indexOf("pydio.getcontroller().fireaction") > -1) { //Pydio
                                        resolve(53); //Pydio
                                    } else if (Text_Scripts.indexOf("/quick.") > -1) { //Quick.CMS
                                        resolve(54); //Quick.CMS
                                    } else if (Text_Scripts.indexOf("rw_common/themes/") > -1) { //RapidWeaver
                                        resolve(55); //RapidWeaver        
                                    } else if (Text_Scripts.indexOf("jquery.sumoselector.min.") > -1) { //SUMOshop
                                        resolve(56); //SUMOshop
                                    } else if (Text_Scripts.indexOf("var sana = sana") > -1) { //Sana Commerce
                                        resolve(57); //Sana Commerce
                                    } else if (Text_Scripts.indexOf('"auth_domain" : "setup.ru"') > -1) { //Setup.ru
                                        resolve(58); //Setup.ru
                                    } else if (Text_Scripts.indexOf("var msowebpartpageformname =") > -1) { //SharePoint
                                        resolve(59); //SharePoint
                                    } else if (Text_Scripts.indexOf("//cdn.shopify.com/") > -1) { //Shopify
                                        resolve(60); //Shopify
                                    } else if (Text_Scripts.indexOf("var shoptet = shoptet") > -1) { //Shoptet
                                        resolve(61); //Shoptet
                                    } else if (Text_Scripts.indexOf("jquery.shopware.min.js") > -1) { //Shopware
                                        resolve(62); //Shopware
                                    } else if (Text_Scripts.indexOf("analytics.showoff.asp.events") > -1) { //Showoff
                                        resolve(63); //Showoff
                                    } else if (Text_Scripts.indexOf("var smf_theme_url =") > -1) { //Simple Machines Forum
                                        resolve(64); //Simple Machines Forum
                                    } else if (Text_Scripts.indexOf("sk.singletons.env.setmultiple(") > -1) { //SiteKreator
                                        resolve(65); //SiteKreator
                                    } else if (Text_Scripts.indexOf("telerik.sitefinity.") > -1) { //Sitefinity
                                        resolve(66); //Sitefinity
                                    } else if (Text_Scripts.indexOf("//www.sitonline.it/common/js") > -1) { //Sitonline
                                        resolve(67); //Sitonline
                                    } else if (Text_Scripts.indexOf("//smartetailing.piwikpro.com/") > -1) { //SmartEtailing
                                        resolve(68); //SmartEtailing
                                    } else if (Text_Scripts.indexOf("/smartstore.") > -1) { //SmartStore.NET
                                        resolve(69); //SmartStore.NET
                                    } else if (Text_Scripts.indexOf("//cdn.smugmug.com/") > -1) { //SmugMug
                                        resolve(70); //SmugMug
                                    } else if (Text_Scripts.indexOf("socialengine") > -1) { //SocialEngine
                                        resolve(71); //SocialEngine
                                    } else if (Text_Scripts.indexOf("//static.squarespace.com/") > -1) { //Squarespace
                                        resolve(72); //Squarespace
                                    } else if (Text_Scripts.indexOf(".squiz.net/") > -1) { //Squiz
                                        resolve(73); //Squiz
                                    } else if (Text_Scripts.indexOf("//static-assets.strikinglycdn.com/") > -1) { //Strikingly
                                        resolve(74); //Strikingly
                                    } else if (Text_Scripts.indexOf(".tailbase.com/") > -1) { //Tailbase
                                        resolve(75); //Tailbase
                                    } else if (Text_Scripts.indexOf("if (typeof(tangora) ==") > -1) { //Tangora Web CMS
                                        resolve(76); //Tangora Web CMS
                                    } else if (Text_Scripts.indexOf("_tempesttracker") > -1) { //Tempest
                                        resolve(77); //Tempest
                                    } else if (Text_Scripts.indexOf(".textalk.se/") > -1) { //Textalk Webshop
                                        resolve(78); //Textalk Webshop
                                    } else if (Text_Scripts.indexOf("//cdn.ticimax.com/") > -1) { //Ticimax
                                        resolve(79); //Ticimax
                                    } else if (Text_Scripts.indexOf("tilda-") > -1) { //Tilda
                                        resolve(80); //Tilda
                                    } else if (Text_Scripts.indexOf(".tumblr.com/") > -1) { //Tumblr
                                        resolve(81); //Tumblr
                                    } else if (Text_Scripts.indexOf(".typepad.com/") > -1) { //TypePad
                                        resolve(82); //TypePad
                                    } else if (Text_Scripts.indexOf("typo3temp/") > -1) { //Typo3
                                        resolve(83); //Typo3
                                    } else if (Text_Scripts.indexOf("ultimizeintegration.ashx?t=") > -1) { //Ultimize CMS
                                        resolve(84); //Ultimize CMS
                                    } else if (Text_Scripts.indexOf("vigbo.com/") > -1) { //Vigbo
                                        resolve(85); //Vigbo
                                    } else if (Text_Scripts.indexOf("window.visionapps.token") > -1) { //Vision
                                        resolve(86); //Vision
                                    } else if (Text_Scripts.indexOf(".visualsoft.co.uk") > -1) { //Visualsoft
                                        resolve(87); //Visualsoft
                                    } else if (Text_Scripts.indexOf("vivvorotatingheadlines") > -1) { //Vivvo
                                        resolve(88); //Vivvo
                                    } else if (Text_Scripts.indexOf("/volusion.js") > -1) { //Volusion
                                        resolve(89); //Volusion
                                    } else if (Text_Scripts.indexOf("wm_select_link(") > -1) { //WMaker
                                        resolve(90); //WMaker
                                    } else if (Text_Scripts.indexOf("webacappella_") > -1) { //WebAcappella
                                        resolve(91); //WebAcappella
                                    } else if (Text_Scripts.indexOf("/webgui/") > -1) { //WebGUI
                                        resolve(92); //WebGUI
                                    } else if (Text_Scripts.indexOf(".webflow.com/") > -1) { //Webflow
                                        resolve(93); //Webflow
                                    } else if (Text_Scripts.indexOf("/weblication/") > -1) { //Weblication
                                        resolve(94); //Weblication
                                    } else if (Text_Scripts.indexOf("webs = window.webs") > -1) { //Webs
                                        resolve(95); //Webs
                                    } else if (Text_Scripts.indexOf("/websale") > -1) { //Websale
                                        resolve(96); //Websale
                                    } else if (Text_Scripts.indexOf("websitebuilder.com") > -1) { //WebsiteBuilder
                                        resolve(97); //WebsiteBuilder
                                    } else if (Text_Scripts.indexOf("x5engine.js") > -1) { //WebSite X5
                                        resolve(98); //WebSite X5
                                    } else if (Text_Scripts.indexOf("_w = _w || {}; _w.secureprefix=") > -1) { //Weebly
                                        resolve(99); //Weebly
                                    } else if (Text_Scripts.indexOf("var wikispaces_isuserloggedIn") > -1) { //Wikispaces
                                        resolve(100); //Wikispaces
                                    } else if (Text_Scripts.indexOf("wixbisession.viewersessionid") > -1) { //Wix
                                        resolve(101); //Wix
                                    } else if (Text_Scripts.indexOf("var wcf_path =") > -1) { //WoltLab
                                        resolve(102); //WoltLab
                                    } else if (Text_Scripts.indexOf("xenforo") > -1) { //XenForo
                                        resolve(103); //XenForo
                                    } else if (Text_Scripts.indexOf("/xoops.js") > -1) { //Xoops
                                        resolve(104); //Xoops
                                    } else if (Text_Scripts.indexOf("/yabb.js") > -1) { //YaBB
                                        resolve(105); //YaBB
                                    } else if (Text_Scripts.indexOf("//static.yellowpages.ca/") > -1) { //Yellow Pages Canada
                                        resolve(106); //Yellow Pages Canada
                                    } else if (Text_Scripts.indexOf("/zms/") > -1) { //ZMS
                                        resolve(107); //ZMS
                                    } else if (Text_Scripts.indexOf(".zendesk.com") > -1) { //Zendesk
                                        resolve(108); //Zendesk
                                    } else if (Text_Scripts.indexOf("/concrete") > -1) { //concrete5
                                        resolve(109); //concrete5
                                    } else if (Text_Scripts.indexOf("window.$docsify") > -1) { //docsify
                                        resolve(110); //docsify
                                    } else if (Text_Scripts.indexOf("dotasset/") > -1) { //dotCMS
                                        resolve(111); //dotCMS
                                    } else if (Text_Scripts.indexOf("/e107_") > -1) { //e107
                                        resolve(112); //e107
                                    } else if (Text_Scripts.indexOf("/epages/") > -1) { //ePages
                                        resolve(113); //ePages
                                    } else if (Text_Scripts.indexOf("fcmsJs.") > -1) { //fCMS
                                        resolve(114); //fCMS
                                    } else if (Text_Scripts.indexOf("iwebblogmainpage") > -1) { //iWeb
                                        resolve(115); //iWeb
                                    } else if (Text_Scripts.indexOf(".ucoz.net/") > -1) { //uCoz
                                        resolve(116); //uCoz
                                    } else if (Text_Scripts.indexOf("yii_csrf_token") > -1 || Text_Scripts.indexOf("yii_session_token") > -1) { //YII
                                        resolve(291); //YII
                                    } else if (Text_Scripts.indexOf("catalog/view/theme/") > -1) { //OpenCart
                                        resolve(295); //OpenCart
                                    } else if (Text_Scripts.indexOf("vtex") > -1) { //VTEX
                                        resolve(296); //VTEX
                                    } else if (Text_Scripts.indexOf("moodle") > -1) { //Moodle
                                        resolve(297); //Moodle
                                    } else if (Text_Scripts.indexOf("tray._trackpageview") > -1) { //Tray
                                        resolve(298); //Tray
                                    } else if (Text_Scripts.indexOf("ektron") > -1) { //Ektron
                                        resolve(304); //Ektron
                                    } else if (Text_Scripts.indexOf("bigcommerce") > -1) { //Bigcommerce
                                        resolve(305); //Bigcommerce     
                                    } else if (Text_Scripts.indexOf("bitrix") > -1) { //Bitrix
                                        resolve(306); //Bitrix     
                                    } else if (Text_Scripts.indexOf("bam.nr-data.net") > -1) { //Ruby on Rails
                                        resolve(307); //Ruby on Rails             
                                    } else if (Text_Scripts.indexOf("sitecore") > -1) { //sitecore
                                        resolve(309); //sitecore      
                                    } else if (Text_Scripts.indexOf("musepolyfill") > -1) { //Adobe Muse
                                        resolve(310); //Adobe Muse         
                                    } else {
                                        //console.log(Text_Scripts)
                                    }
                                }
                            }
                        }


                        //Busca por Link tag
                        var links = $('a');
                        $(links).each(async function (i, link) {
                            var link = $(link).attr('href');
                            if (link == undefined) {

                            } else if (link.indexOf("wp-content/") > -1) {
                                resolve(2);
                            } else if (link.indexOf("bitrix/") > -1) {
                                resolve(306);  //Bitrix
                            } else if (link.indexOf("bigcommerce") > -1) { //Bigcommerce
                                resolve(305); //Bigcommerce               
                            } else if (link.indexOf("sitecore") > -1) { //sitecore
                                resolve(309); //sitecore   
                            }
                        })

                        //Busca Pelas imagens
                        $("img").each(function (i, image) {
                            var link = $(image).attr('src')
                            if (link == undefined) {

                            } else if (link.indexOf("wp-content/") > -1) { //Wordpress
                                resolve(2); //Wordpress
                            } else if (link.indexOf("centricity") > -1) { //Centricity
                                resolve(294); //Centricity
                            } else if (link.indexOf("/INTERSHOP/static/WFS/") > -1) { //Intershop
                                resolve(21); //Intershop
                            } else if (link.indexOf("/powered-by-jetshop.png") > -1) { //JetShop
                                resolve(23); //JetShop
                            } else if (link.indexOf("//image.jimcdn.com/app/") > -1) { //Jimdo
                                resolve(24); //Jimdo
                            } else if (link.indexOf("//livedoor.blogimg.jp/") > -1) { //Livedoor Blog
                                resolve(27); //Livedoor Blog
                            } else if (link.indexOf("//cdn.awsli.com.br/production/static/whitelabel/lojaintegrada/img/") > -1) { //Loja Integrada
                                resolve(207); //Loja Integrada
                            } else if (link.indexOf("//gigaplus.makeshop.jp/") > -1) { //MakeShop
                                resolve(30); //MakeShop
                            } else if (link.indexOf("/application/maxsite/templates/") > -1) { //MaxSite CMS
                                resolve(31); //MaxSite CMS
                            } else if (link.indexOf("//cdn-images-1.medium.com/") > -1) { //Medium
                                resolve(33); //Medium
                            } else if (link.indexOf("//static.ning.com/") > -1) { //Ning
                                resolve(38); //Ning
                            } else if (link.indexOf("/nucleus/media/") > -1) { //Nucleus CMS
                                resolve(224); //Nucleus CMS
                            } else if (link.indexOf("/onewebstatic/") > -1) { //One.com
                                resolve(43); //One.com
                            } else if (link.indexOf("/oc-content/") > -1) { //Osclass
                                resolve(44); //Osclass
                            } else if (link.indexOf("//siteassets.pagecloud.com/") > -1) { //PageCloud
                                resolve(47); //PageCloud
                            } else if (link.indexOf("perch/resources/") > -1) { //Perch
                                resolve(293); //Perch
                            } else if (link.indexOf("//snworksceo.imgix.net/") > -1) { //SNworks
                                resolve(292); //SNworks
                            } else if (link.indexOf("//www.shopfactory.com/") > -1) { //ShopFactory
                                resolve(249); //ShopFactory
                            } else if (link.indexOf("//cdn.shopify.com/") > -1) { //Shopify
                                resolve(60); //Shopify
                            } else if (link.indexOf("//cdn.myshoptet.com/") > -1) { //Shoptet
                                resolve(61); //Shoptet
                            } else if (link.indexOf(".mysitoo.com/") > -1) { //Sitoo
                                resolve(254); //Sitoo
                            } else if (link.indexOf("//smartetailing.piwikpro.com/piwik.php") > -1) { //SmartEtailing
                                resolve(68); //SmartEtailing
                            } else if (link.indexOf("//cdn.smugmug.com/") > -1) { //SmugMug
                                resolve(70); //SmugMug
                            } else if (link.indexOf("//static1.squarespace.com/") > -1) { //Squarespace
                                resolve(72); //Squarespace
                            } else if (link.indexOf("//assets.strikingly.com") > -1) { //Strikingly
                                resolve(74); //Strikingly
                            } else if (link.indexOf(".tailbase.com/") > -1) { //Tailbase
                                resolve(75); //Tailbase
                            } else if (link.indexOf("/ticimax/") > -1) { //Ticimax
                                resolve(79); //Ticimax
                            } else if (link.indexOf(".tumblr.com/") > -1) { //Tumblr
                                resolve(81); //Tumblr
                            } else if (link.indexOf(".typepad.com/") > -1) { //TypePad
                                resolve(82); //TypePad
                            } else if (link.indexOf("typo3temp/") > -1) { //Typo3
                                resolve(83); //Typo3
                            } else if (link.indexOf(".volusion.com/") > -1) { //Volusion
                                resolve(89); //Volusion
                            } else if (link.indexOf("wpimages/") > -1) { //WebPlus
                                resolve(266); //WebPlus
                            } else if (link.indexOf(".webflow.com/") > -1) { //Webflow
                                resolve(93); //Webflow
                            } else if (link.indexOf("/weblication/") > -1) { //Weblication
                                resolve(94); //Weblication
                            } else if (link.indexOf("//static.websimages.com/") > -1) { //Webs
                                resolve(95); //Webs
                            } else if (link.indexOf("/websale") > -1) { //Websale
                                resolve(96); //Websale
                            } else if (link.indexOf("xenforo/") > -1) { //XenForo
                                resolve(103); //XenForo
                            } else if (link.indexOf("/yabbfiles/") > -1) { //YaBB
                                resolve(105); //YaBB
                            } else if (link.indexOf("/zms/") > -1) { //ZMS
                                resolve(107); //ZMS
                            } else if (link.indexOf("/e107_") > -1) { //e107
                                resolve(112); //e107
                            } else if (link.indexOf("bigcommerce") > -1) { //Bigcommerce
                                resolve(305); //Bigcommerce  
                            }
                        });

                        

                        var cookies = response.headers['set-cookie']
                        if (cookies != undefined) {
                            for (let key in cookies) {
                                var cookie = cookies[key]
                                if (cookie == undefined) {
                                } else if (cookie.indexOf("CAKEPHP") > -1) { //CAKEPHP
                                    resolve(299); //CAKEPHP
                                } else if (cookie.indexOf("Apptegy") > -1) { //Apptegy
                                    resolve(300); //Apptegy
                                } else if (cookie.indexOf("campussuite") > -1) { //Campus Suite
                                    resolve(302); //Campus Suite
                                } else if (cookie.indexOf("laravel_session") > -1) { //Laravel
                                    resolve(308); //Laravel
                                }
                            }
                        }

                        var servers = response.headers['server']

                        if (servers == undefined) {
                        } else if (servers.indexOf("Apptegy") > -1) { //Apptegy
                            resolve(300); //Apptegy
                        } else if (servers.indexOf("Destinet") > -1) { //Destinet
                            resolve(303); //Destinet
                        }

                        var powereds = response.headers['x-powered-by']
                        if (powereds == undefined) {
                        } else if (powereds.indexOf("Apptegy") > -1) { //Apptegy
                            resolve(300); //Apptegy
                        } else if (powereds.indexOf("Brightspot") > -1) { //Brightspot
                            resolve(301); //Brightspot
                        }


                        if (body.indexOf("catalog/view/theme/") > -1) { //OpenCart
                            resolve(295); //OpenCart
                        } else if (body.indexOf("wp-content/") > -1) { //Wordpress
                            resolve(2); //Wordpress
                        } else if (body.indexOf("ektron.javascript.") > -1) { //Ektron
                            resolve(304); //Ektron     
                        } else if (body.indexOf("bam.nr-data.net") > -1) { //Ruby on Rails
                            resolve(307); //Ruby on Rails            
                        } else {

                            resolve(998);
                        }

                        


                    } catch (e) {
                        console.log(e)
                        //resolve(999);
                    }

                }).on('error', err => {
                    resolve(999);
                });

            } catch (err) {
                console.log(err)
                resolve(998);
            }
        });
    }
    identificador_title(url) {
        switch (url) {
            case 1:
                return 'Joolma';
            case 2:
                return 'WordPress';
            case 3:
                return 'PrestaShop';
            case 4:
                return 'Drupal';
            case 5:
                return 'osCommerce';
            case 6:
                return 'ZendFramework';
            case 7:
                return 'lokomedia';
            case 8:
                return 'Magento';
            case 9:
                return 'vBulletin';
            case 10:
                return 'Liferay';
            case 11:
                return 'Ciashop';
            case 12:
                return 'CivicEngage';
            case 13:
                return 'DealerFire';
            case 14:
                return 'DreamCommerce';
            case 15:
                return 'Flarum';
            case 16:
                return 'Format';
            case 17:
                return 'Geeklog';
            case 18:
                return 'ghost-sdk';
            case 19:
                return 'Google Sites';
            case 20:
                return 'HumHub';
            case 21:
                return 'Intershop';
            case 22:
                return 'JTL-Shop';
            case 23:
                return 'JetShop';
            case 24:
                return 'Jimdo';
            case 25:
                return 'LeadPages';
            case 26:
                return 'LightCMS';
            case 27:
                return 'Livedoor Blog';
            case 28:
                return 'Livestreet CMS';
            case 29:
                return 'MONO';
            case 30:
                return 'MakeShop';
            case 31:
                return 'MaxSite CMS';
            case 32:
                return 'MediaWiki';
            case 33:
                return 'Medium';
            case 34:
                return 'Mintox';
            case 35:
                return 'Nation Builder';
            case 36:
                return 'Neos';
            case 37:
                return 'Nextcloud';
            case 38:
                return 'Ning';
            case 39:
                return 'Nodebb';
            case 40:
                return 'NukeViet';
            case 41:
                return 'Octopress';
            case 42:
                return 'Odoo';
            case 43:
                return 'One.com';
            case 44:
                return 'Osclass';
            case 45:
                return 'Overblog';
            case 46:
                return 'PHP-Fusion';
            case 47:
                return 'PageCloud';
            case 48:
                return 'Pagekit';
            case 49:
                return 'Pangea CMS';
            case 50:
                return 'Pimcore';
            case 51:
                return 'Plone';
            case 52:
                return 'PowerBoutique';
            case 53:
                return 'Pydio';
            case 54:
                return 'Quick.CMS';
            case 55:
                return 'RapidWeaver';
            case 56:
                return 'SUMOshop';
            case 57:
                return 'Sana Commerce';
            case 58:
                return 'Setup.ru';
            case 59:
                return 'SharePoint';
            case 60:
                return 'Shopify';
            case 61:
                return 'Shoptet';
            case 62:
                return 'Shopware';
            case 63:
                return 'Showoff';
            case 64:
                return 'Simple Machines Forum';
            case 65:
                return 'SiteKreator';
            case 66:
                return 'Sitefinity';
            case 67:
                return 'Sitonline';
            case 68:
                return 'SmartEtailing';
            case 69:
                return 'SmartStore.NET';
            case 70:
                return 'SmugMug';
            case 71:
                return 'SocialEngine';
            case 72:
                return 'Squarespace';
            case 73:
                return 'Squiz';
            case 74:
                return 'Strikingly';
            case 75:
                return 'Tailbase';
            case 76:
                return 'Tangora Web CMS';
            case 77:
                return 'Tempest';
            case 78:
                return 'Textalk Webshop';
            case 79:
                return 'Ticimax';
            case 80:
                return 'Tilda';
            case 81:
                return 'Tumblr';
            case 82:
                return 'TypePad';
            case 83:
                return 'Typo3';
            case 84:
                return 'Ultimize CMS';
            case 85:
                return 'Vigbo';
            case 86:
                return 'Vision';
            case 87:
                return 'Visualsoft';
            case 88:
                return 'Vivvo';
            case 89:
                return 'Volusion';
            case 90:
                return 'WMaker';
            case 91:
                return 'WebAcappella';
            case 92:
                return 'WebGUI';
            case 93:
                return 'Webflow';
            case 94:
                return 'Weblication';
            case 95:
                return 'Webs';
            case 96:
                return 'Websale';
            case 97:
                return 'WebsiteBuilder';
            case 98:
                return 'Vivvo';
            case 99:
                return 'Weebly';
            case 100:
                return 'Wikispaces';
            case 101:
                return 'Wix';
            case 102:
                return 'WoltLab';
            case 103:
                return 'XenForo';
            case 104:
                return 'Xoops';
            case 105:
                return 'YaBB';
            case 106:
                return 'Yellow Pages Canada';
            case 107:
                return 'ZMS';
            case 108:
                return 'Zendesk';
            case 109:
                return 'concrete5';
            case 110:
                return 'docsify';
            case 111:
                return 'dotCMS';
            case 112:
                return 'e107';
            case 113:
                return 'ePages';
            case 114:
                return 'fCMS';
            case 115:
                return 'iWeb';
            case 116:
                return '116';
            case 117:
                return 'Webnode';
            case 118:
                return 'Shopsys';
            case 119:
                return 'Shoptet';
            case 120:
                return 'A-Blog Cms';
            case 121:
                return 'AVE cms';
            case 122:
                return 'Adobe GoLive';
            case 123:
                return 'Advantshop';
            case 124:
                return 'Agility CMS';
            case 125:
                return 'Alterian';
            case 126:
                return 'Amiro.CMS';
            case 127:
                return 'Apache Lenya';
            case 128:
                return 'Backdrop CMS';
            case 129:
                return 'BaseKit';
            case 130:
                return 'Big Cartel';
            case 131:
                return 'Bigace';
            case 132:
                return 'Blogger';
            case 133:
                return 'Bolt';
            case 134:
                return 'Bootply';
            case 135:
                return 'Bricolage CMS';
            case 136:
                return 'C1 CMS';
            case 137:
                return 'CM4all';
            case 138:
                return 'CMS-Tool';
            case 139:
                return 'CMS Made Simple';
            case 140:
                return 'CMSimple_XH';
            case 141:
                return 'CanalBlog';
            case 142:
                return 'Chevereto';
            case 143:
                return 'CoffeeCup';
            case 144:
                return 'CommonSpot';
            case 145:
                return 'Contao';
            case 146:
                return 'Contenido CMS';
            case 147:
                return 'Contensis CMS';
            case 148:
                return 'ContentXXL';
            case 149:
                return 'Convio';
            case 150:
                return 'CoreMedia CMS';
            case 151:
                return 'Corepublish';
            case 152:
                return 'Crowd Fusion';
            case 153:
                return 'CubeCart';
            case 154:
                return 'DIAFAN.CMS';
            case 155:
                return 'DNN';
            case 156:
                return 'Danneo';
            case 157:
                return 'DataLife Engine';
            case 158:
                return 'Dim Works';
            case 159:
                return 'Discourse';
            case 160:
                return 'Hycus';
            case 161:
                return 'DokuWiki';
            case 162:
                return 'DotEasy';
            case 163:
                return 'Duda';
            case 164:
                return 'Dynamicweb';
            case 165:
                return 'E+ CMS';
            case 166:
                return 'E-monsite';
            case 167:
                return 'ECShop';
            case 168:
                return 'Easysite';
            case 169:
                return 'EditPlus';
            case 170:
                return 'Edito';
            case 171:
                return 'Enonic CMS';
            case 172:
                return 'Episerver';
            case 173:
                return 'Everweb';
            case 174:
                return 'Fork CMS';
            case 175:
                return 'Zeta Producer';
            case 176:
                return 'FrontPage';
            case 177:
                return 'GX Web Manager';
            case 178:
                return 'GetSimple CMS';
            case 179:
                return 'GoDaddy Website Builder';
            case 180:
                return 'Government Site Builder';
            case 181:
                return 'GraffitiCMS';
            case 182:
                return 'Grav CMS';
            case 183:
                return 'Homestead';
            case 184:
                return 'HostedShop';
            case 185:
                return 'HubSpot';
            case 186:
                return 'Hugo';
            case 187:
                return 'ImageCMS';
            case 188:
                return 'Immediacy';
            case 189:
                return 'Imperia CMS';
            case 190:
                return 'ImpressCMS';
            case 191:
                return 'ImpressPages CMS';
            case 192:
                return 'Infopark CMS Fiona';
            case 193:
                return 'InstantCMS';
            case 194:
                return 'InterRed';
            case 195:
                return 'Jadu CMS';
            case 196:
                return 'Jekyll';
            case 197:
                return 'Jieqi CMS';
            case 198:
                return 'JustSystems Homepage Builder';
            case 199:
                return 'KVS CMS';
            case 200:
                return 'Koken';
            case 201:
                return 'Komodo CMS';
            case 202:
                return 'Kryptronic';
            case 203:
                return 'Labrador CMS';
            case 204:
                return 'Lauyan TOWeb';
            case 205:
                return 'LiveEdit';
            case 206:
                return 'LogiCommerce';
            case 207:
                return 'Loja Integrada';
            case 208:
                return 'Mabisy';
            case 209:
                return 'Mambo';
            case 210:
                return 'MediaWiki';
            case 211:
                return 'Melody';
            case 212:
                return 'Metro Publisher';
            case 213:
                return 'Microsoft Word';
            case 214:
                return 'Midgard CMS';
            case 215:
                return 'Mijnwebwinkel';
            case 216:
                return 'Mobirise';
            case 217:
                return 'Modified Shopsoftware';
            case 218:
                return 'Modx CMS';
            case 219:
                return 'Movable Type';
            case 220:
                return 'Mura';
            case 221:
                return 'NetObjects';
            case 222:
                return 'Netvolution';
            case 223:
                return 'Notepad++';
            case 224:
                return 'Nucleus CMS';
            case 225:
                return 'Open CMS';
            case 226:
                return 'Open Journal Systems';
            case 227:
                return 'OpenNemas';
            case 228:
                return 'OpenOffice';
            case 229:
                return 'Orchard';
            case 230:
                return 'Orthodox Web Solutions';
            case 231:
                return 'Oxatis';
            case 232:
                return 'PHP-Nuke';
            case 233:
                return 'PHP Link Directory';
            case 234:
                return 'PHPShop';
            case 235:
                return 'PHPVibe';
            case 236:
                return 'Parallels Presence Builder';
            case 237:
                return 'Pelican';
            case 238:
                return 'Percussion';
            case 239:
                return 'Piwigo';
            case 240:
                return 'ProcessWire';
            case 241:
                return 'Quick.Cart';
            case 242:
                return 'RCMS';
            case 243:
                return 'RVsitebuilder';
            case 244:
                return 'Ready Pro Ecommerce';
            case 245:
                return 'Sandvox';
            case 246:
                return 'SchoolSitePro';
            case 247:
                return 'Seamless CMS';
            case 248:
                return 'Serendipity';
            case 249:
                return 'ShopFactory';
            case 250:
                return 'SilverStripe CMS';
            case 251:
                return 'SiteDirect';
            case 252:
                return 'SitePad';
            case 253:
                return 'SiteSpinner';
            case 254:
                return 'Sitoo';
            case 255:
                return 'Sparkle CMS';
            case 256:
                return 'Telligent';
            case 257:
                return 'Textpattern CMS';
            case 258:
                return 'textpattern cms';
            case 259:
                return 'Trellix';
            case 260:
                return 'Typecho';
            case 261:
                return 'Typesetter';
            case 262:
                return 'Visual Studio';
            case 263:
                return 'WYSIWYG Web Builder';
            case 264:
                return 'Web 2 Date';
            case 265:
                return 'Web Page Maker';
            case 266:
                return 'WebPlus';
            case 267:
                return 'Web Presence Builder';
            case 268:
                return 'WebSite Tonight';
            case 269:
                return 'WebSphere Studio Homepage Builder';
            case 270:
                return 'Websplanet';
            case 271:
                return 'Wheel CMS';
            case 272:
                return 'XT-Commerce';
            case 273:
                return 'Xiuno BBS';
            case 274:
                return 'XpressEngine';
            case 275:
                return 'X‑Cart';
            case 276:
                return 'Zen Cart';
            case 277:
                return 'Zoho Sites';
            case 278:
                return 'Zyro';
            case 279:
                return 'b2evolution';
            case 280:
                return 'blog.ir';
            case 281:
                return 'cloudrexx';
            case 282:
                return 'eSyndiCat';
            case 283:
                return 'eZ Publish';
            case 284:
                return 'elcomCMS';
            case 285:
                return 'nopCommerce';
            case 286:
                return 'onpublix CMS';
            case 287:
                return 'pTools';
            case 288:
                return 'phpwcms';
            case 289:
                return 'phpwind';
            case 290:
                return 'plentymarkets';
            case 291:
                return 'YII';
            case 292:
                return 'SNworks';
            case 293:
                return 'Perch';
            case 294:
                return 'Centricity';
            case 295:
                return 'OpenCart';
            case 296:
                return 'VTEX';
            case 297:
                return 'Moodle';
            case 298:
                return 'Tray';
            case 299:
                return 'CAKEPHP';
            case 300:
                return 'Apptegy'; 
            case 301:
                return 'Brightspot';
            case 302:
                return 'Campus Suite';  
            case 303:
                return 'Destinet';  
            case 304:
                return 'Ektron';  
            case 305:
                return 'BigCommerce';  
            case 306:
                return 'Bitrix';  
            case 307:
                return 'Ruby on Rails';    
            case 308:
                return 'Laravel';    
            case 309:
                return 'SiteCore';    
            case 310:
                return 'Adobe Muse';    
            case 311:
                return 'Django CMS';
            case 998:
                return 'Outros'; //
            case 999:
                return 'Site OFF';
        }
    }
}
module.exports = new checks();

